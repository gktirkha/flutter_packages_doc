<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the checkStatus method from the BackdoorFlutter class, for the Dart programming language.">
  <title>checkStatus method - BackdoorFlutter class - backdoor_flutter library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">
  
</head>

<body data-base-href="../../" data-using-base-href="false" class="light-theme">
<div id="overlay-under-drawer"></div>
<header id="title">
  <span id="sidenav-left-toggle" class="material-symbols-outlined" role="button" tabindex="0">menu</span>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">backdoor_flutter</a></li>
    <li><a href="../../backdoor_flutter/backdoor_flutter-library.html">backdoor_flutter.dart</a></li>
    <li><a href="../../backdoor_flutter/BackdoorFlutter-class.html">BackdoorFlutter</a></li>
    <li class="self-crumb">checkStatus static method</li>
  </ol>
  <div class="self-name">checkStatus</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
  <div class="toggle" id="theme-button" title="Toggle brightness">
    <label for="theme">
      <input type="checkbox" id="theme" value="light-theme">
      <span id="dark-theme-button" class="material-symbols-outlined">
        dark_mode
      </span>
      <span id="light-theme-button" class="material-symbols-outlined">
        light_mode
      </span>
    </label>
  </div>
</header>
<main>
<div
    id="dartdoc-main-content"
    class="main-content"
    data-above-sidebar="backdoor_flutter&#47;BackdoorFlutter-class-sidebar.html"
    data-below-sidebar="">
    <div>
<h1><span class="kind-method">checkStatus</span> static method 
</h1></div>

    <section class="multi-line-signature">
      
<span class="returntype"><a href="https://api.flutter.dev/flutter/dart-core/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter">void</span>&gt;</span></span>
<span class="name ">checkStatus</span>(<wbr>{<ol class="parameter-list"> <li><span class="parameter" id="checkStatus-param-httpHeaders"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/Map-class.html">Map</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span>, <span class="type-parameter">dynamic</span>&gt;</span>?</span> <span class="parameter-name">httpHeaders</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-httpQueryParameters"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/Map-class.html">Map</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span>, <span class="type-parameter">dynamic</span>&gt;</span>?</span> <span class="parameter-name">httpQueryParameters</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-httpRequestBody"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/Map-class.html">Map</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span>, <span class="type-parameter">dynamic</span>&gt;</span>?</span> <span class="parameter-name">httpRequestBody</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-httpMethod"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">httpMethod</span> = <span class="default-value">&#39;GET&#39;</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onException"><span>required</span> <span class="type-annotation"><a href="../../backdoor_flutter/OnException.html">OnException</a></span> <span class="parameter-name">onException</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onUnhandled"><span>required</span> <span class="type-annotation"><a href="../../backdoor_flutter/OnUnhandled.html">OnUnhandled</a></span> <span class="parameter-name">onUnhandled</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onAppNotFound"><span class="type-annotation"><a href="../../backdoor_flutter/OnAppNotFound.html">OnAppNotFound</a>?</span> <span class="parameter-name">onAppNotFound</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onPaid"><span class="type-annotation"><a href="../../backdoor_flutter/OnPaid.html">OnPaid</a>?</span> <span class="parameter-name">onPaid</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onUnPaid"><span class="type-annotation"><a href="../../backdoor_flutter/OnUnPaid.html">OnUnPaid</a>?</span> <span class="parameter-name">onUnPaid</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onLimitedLaunch"><span class="type-annotation"><a href="../../backdoor_flutter/OnLimitedLaunch.html">OnLimitedLaunch</a>?</span> <span class="parameter-name">onLimitedLaunch</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onLimitedLaunchExceeded"><span class="type-annotation"><a href="../../backdoor_flutter/OnLimitedLaunchExceeded.html">OnLimitedLaunchExceeded</a>?</span> <span class="parameter-name">onLimitedLaunchExceeded</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onTrial"><span class="type-annotation"><a href="../../backdoor_flutter/OnTrial.html">OnTrial</a>?</span> <span class="parameter-name">onTrial</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onTrialWarning"><span class="type-annotation"><a href="../../backdoor_flutter/OnTrialWarning.html">OnTrialWarning</a>?</span> <span class="parameter-name">onTrialWarning</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onTrialEnded"><span class="type-annotation"><a href="../../backdoor_flutter/OnTrialEnded.html">OnTrialEnded</a>?</span> <span class="parameter-name">onTrialEnded</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-onTargetVersionMisMatch"><span class="type-annotation"><a href="../../backdoor_flutter/OnTargetVersionMisMatch.html">OnTargetVersionMisMatch</a>?</span> <span class="parameter-name">onTargetVersionMisMatch</span>, </span></li>
<li><span class="parameter" id="checkStatus-param-useCachedConfigOnNetworkException"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/bool-class.html">bool</a></span> <span class="parameter-name">useCachedConfigOnNetworkException</span> = <span class="default-value">true</span>, </span></li>
</ol>})

      

    </section>
    
<section class="desc markdown">
  <p>Checks the status of the application by retrieving and validating payment model data.</p>
<p>This method performs an online check for the payment model unless specified otherwise.
It handles various callbacks for different states of the application and potential exceptions.
The function can be customized with HTTP headers, query parameters, request body, and method type.</p>
<p>Parameters:</p>
<ul>
<li><code>httpHeaders</code> : Optional map of HTTP headers to send with the request.</li>
<li><code>httpQueryParameters</code> : Optional map of query parameters to include in the request.</li>
<li><code>httpRequestBody</code> : Optional map for the body of the request (for POST or PUT requests).</li>
<li><code>httpMethod</code> : The HTTP method to use for the request. Defaults to 'GET'.</li>
<li><code>onException</code> : Callback invoked when an exception occurs during the operation.</li>
<li><code>onUnhandled</code> : Callback invoked for unhandled cases or unexpected results.</li>
<li><code>onAppNotFound</code> : Optional callback for when the application is not found.</li>
<li><code>onPaid</code> : Callback invoked when the application is in a paid state.</li>
<li><code>onUnPaid</code> : Callback invoked when the application is in an unpaid state.</li>
<li><code>onLimitedLaunch</code> : Callback for handling limited launch scenarios.</li>
<li><code>onLimitedLaunchExceeded</code> : Callback for when limited launch is exceeded.</li>
<li><code>onTrial</code> : Callback for when the application is in a trial period.</li>
<li><code>onTrialWarning</code> : Callback for trial warning scenarios.</li>
<li><code>onTrialEnded</code> : Callback for when the trial period has ended.</li>
<li><code>onTargetVersionMisMatch</code> : Callback for when the target version does not match.</li>
<li><code>useCachedConfigOnNetworkException</code> : Flag indicating whether to use cached configuration in case of a network exception. Defaults to true.</li>
</ul>
<p>Throws:</p>
<ul>
<li><a href="../../backdoor_flutter/BackdoorFlutterException-class.html">BackdoorFlutterException</a> if there is an issue with the target version or configuration.</li>
</ul>
<p>Returns:</p>
<ul>
<li>A <a href="https://api.flutter.dev/flutter/dart-core/Future-class.html">Future</a> that completes when the status check is done.</li>
</ul>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">static Future&lt;void&gt; checkStatus({
  Map&lt;String, dynamic&gt;? httpHeaders,
  Map&lt;String, dynamic&gt;? httpQueryParameters,
  Map&lt;String, dynamic&gt;? httpRequestBody,
  String httpMethod = &#39;GET&#39;,
  required OnException onException,
  required OnUnhandled onUnhandled,
  OnAppNotFound? onAppNotFound,
  OnPaid? onPaid,
  OnUnPaid? onUnPaid,
  OnLimitedLaunch? onLimitedLaunch,
  OnLimitedLaunchExceeded? onLimitedLaunchExceeded,
  OnTrial? onTrial,
  OnTrialWarning? onTrialWarning,
  OnTrialEnded? onTrialEnded,
  OnTargetVersionMisMatch? onTargetVersionMisMatch,
  bool useCachedConfigOnNetworkException = true,
}) async {
  try {
    final bool shouldCheckOnline = await _shouldCheckOnline();
    BackdoorPaymentModel? storedModel =
        await StorageService.getPaymentModel();
    final BackdoorPaymentModel? operationModel = shouldCheckOnline
        ? await _onlineModel(
            httpHeaders: httpHeaders ?? {},
            httpQueryParameters: httpQueryParameters ?? {},
            httpRequestBody: httpRequestBody ?? {},
            httpMethod: httpMethod,
          )
        : storedModel;

    if (operationModel == null) {
      if (onAppNotFound != null) {
        onAppNotFound();
      } else {
        onUnhandled(OnUnhandledReason.APP_NOT_FOUND_IN_JSON, operationModel);
      }
      return;
    }

    if (shouldCheckOnline) {
      storedModel = operationModel;
      await StorageService.setPaymentModel(storedModel);
    }

    final targetVersion = operationModel.targetVersion;
    if (targetVersion == null) {
      throw BackdoorFlutterException(
        message: &#39;target_version not set in remote json&#39;,
        type: BackdoorFlutterExceptionType.CONFIGURATION_EXCEPTION,
        operationConfiguration: operationModel,
      );
    }

    if (targetVersion != _version) {
      if (onTargetVersionMisMatch != null) {
        onTargetVersionMisMatch(operationModel, targetVersion, _version);
      } else {
        onUnhandled(
          OnUnhandledReason.TARGET_VERSION_MISMATCH,
          operationModel,
        );
      }
      return;
    }
    _handleExecution(
      onPaid: onPaid,
      onTrial: onTrial,
      onUnPaid: onUnPaid,
      onException: onException,
      onUnhandled: onUnhandled,
      onTrialEnded: onTrialEnded,
      onAppNotFound: onAppNotFound,
      operationModel: operationModel,
      onTrialWarning: onTrialWarning,
      onLimitedLaunch: onLimitedLaunch,
      isOnlineModel: shouldCheckOnline,
      onLimitedLaunchExceeded: onLimitedLaunchExceeded,
      onTargetVersionMisMatch: onTargetVersionMisMatch,
    );
  } catch (e) {
    final BackdoorPaymentModel? operationModel =
        await StorageService.getPaymentModel();
    if (useCachedConfigOnNetworkException &amp;&amp;
        operationModel != null &amp;&amp;
        e is BackdoorFlutterException &amp;&amp;
        e.type == BackdoorFlutterExceptionType.NETWORK_EXCEPTION) {
      _handleExecution(
        onPaid: onPaid,
        onTrial: onTrial,
        onUnPaid: onUnPaid,
        isOnlineModel: false,
        onException: onException,
        onUnhandled: onUnhandled,
        onTrialEnded: onTrialEnded,
        onAppNotFound: onAppNotFound,
        operationModel: operationModel,
        onTrialWarning: onTrialWarning,
        onLimitedLaunch: onLimitedLaunch,
        onLimitedLaunchExceeded: onLimitedLaunchExceeded,
        onTargetVersionMisMatch: onTargetVersionMisMatch,
      );
    }

    _logger(e);
    onException(_convertException(e));
  }
}</code></pre>
</section>


  </div> <!-- /.main-content -->
  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <!-- The search input and breadcrumbs below are only responsively visible at low resolutions. -->
<header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>
<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
    <li><a href="../../index.html">backdoor_flutter</a></li>
    <li><a href="../../backdoor_flutter/backdoor_flutter-library.html">backdoor_flutter</a></li>
    <li><a href="../../backdoor_flutter/BackdoorFlutter-class.html">BackdoorFlutter</a></li>
    <li class="self-crumb">checkStatus static method</li>
</ol>

    <h5>BackdoorFlutter class</h5>
    <div id="dartdoc-sidebar-left-content"></div>
  </div><!--/.sidebar-offcanvas-->
  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
</div><!--/.sidebar-offcanvas-->
</main>
<footer>
  <span class="no-break">
    backdoor_flutter
      1.0.0
  </span>
  
</footer>


<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/docs.dart.js"></script>

</body>
</html>

